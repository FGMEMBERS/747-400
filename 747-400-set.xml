<?xml version="1.0"?>
<PropertyList>

 <sim>

  <description>Boeing 747-400</description>
  <author>Gijs de Rooy, Jentron</author>
  <status>early-production</status>
  <aircraft-version>noftp</aircraft-version>
  <flight-model>jsb</flight-model>
  <aero>747-400</aero>

  <sound>
   <path>Aircraft/747-400/Sounds/747-sound.xml</path>
   <switch type="bool"></switch>
  </sound>

  <startup>
   <splash-texture>Aircraft/747-400/splash.png</splash-texture>
  </startup>

  <airport>
   <runways>
    <start-offset-m>50</start-offset-m>
   </runways>
  </airport>

  <model>
   <path>Aircraft/747-400/Models/747-400.xml</path>
   <pushback>
    <kp type="double">500</kp>
    <ki type="double">25</ki>
    <kd type="double">0</kd>
    <position-norm type="double">0</position-norm>
   </pushback>
   <livery>  
    <file type="string">KLM</file>
   </livery> 
  </model>	

  <systems>
   <autopilot>
    <path>Aircraft/747-400/Systems/autopilot.xml</path>
   </autopilot>
  </systems>

  <instrumentation>
   <path>Aircraft/747-400/Systems/instrumentation.xml</path>
  </instrumentation>

  <hud>   
   <enable3d>false</enable3d>
  </hud>

  <!-- VIEWS -->

  <view n="0">
   <name>Captain</name>
   <type>lookfrom</type>
   <internal type="bool">true</internal>
   <config>
    <x-offset-m type="double">-0.55</x-offset-m>
    <y-offset-m type="double">3.7</y-offset-m>
    <z-offset-m type="double">-24.05</z-offset-m>
    <pitch-offset-deg>-10</pitch-offset-deg>
    <default-field-of-view-deg type="double">65.0</default-field-of-view-deg>
   </config>
  </view>

  <view n="101">
   <name>First Officer</name>
   <type>lookfrom</type>
   <internal type="bool">true</internal>
   <config>
    <from-model type="bool">true</from-model>
    <from-model-idx type="int">0</from-model-idx>
    <ground-level-nearplane-m type="double">6f</ground-level-nearplane-m>
    <x-offset-m type="double">0.55</x-offset-m>
    <y-offset-m type="double">3.7</y-offset-m>
    <z-offset-m type="double">-24.05</z-offset-m>
    <pitch-offset-deg>-10</pitch-offset-deg>
    <default-field-of-view-deg type="double">65.0</default-field-of-view-deg>
   </config>
   <dynamic>
    <enabled type="bool">false</enabled>
   </dynamic>
  </view>

  <chase-distance-m type="double" archive="y">-90.0</chase-distance-m>

  <flaps>   
   <setting>0.000</setting> 
   <setting>0.033</setting> 
   <!-- Flaps 1: 66% Slats only at this detent -->   
   <setting>0.167</setting> 
   <!-- Flaps 5: 100% Slats -->   
   <setting>0.333</setting> 
   <!-- Flaps 10: takeoff -->   
   <setting>0.667</setting> 
   <!-- Flaps 20: takeoff, go-around -->   
   <setting>0.833</setting> 
   <!-- Flaps 25: landing -->   
   <setting>1.000</setting> 
   <!-- Flaps 30: landing -->  
  </flaps>

  <help>
   <title>Boeing 747-400</title>

   <key>
    <name>Ctrl-b</name>
    <desc>Toggle speedbrakes</desc>
   </key>
   <key>
    <name>Delete</name>
    <desc>Toggle thrust reversers</desc>
   </key>
   <key>
    <name>w/W</name>
    <desc>Walk for-/backwards</desc>
   </key>

   <text>
All buttons/switches in the cockpit can be controlled using the mouse. Most buttons exist of a
toggle, where clicking it toggles it either on or off. Switches can be turned clockwise with the
left mouse button and counter clockwise using the middle mouse button.

===Startup======
1. Press the continuous ignition switch on the overhead panel.
2. Pull the start select switch for engine #4.
3. Set the cutoff switch on the pedestal to RUN.
4. Now repeat step 2 and 3 for engines #1, #2 and #3. 

===Takeoff======
1.  Set flaps to 20, it will take a minute to extend, so you'd better do this during taxi.
2. Smoothly apply full throttle.
3. Push the stick slightly forward until atleast 80 kts.
4. Around 160 kts, slowly pull the stick back.
5. The plane should takeoff around 180 kts.
6. Retract gear as soon as the aircraft is climbing with atleast 500 ft per minute. 

===Shutdown=====
1. Set all cutoff switches to OFF.
2. Turn continuous ignition OFF. 
   </text>

  </help>
  
  <tutorials>
   <tutorial include="Tutorials/747-400_Preflight.xml"/>
   <tutorial include="Tutorials/747-400_Pushback_and_Start.xml"/>
   <tutorial include="Tutorials/747-400_Taxi_and_Takeoff.xml"/>
  </tutorials>

  <menubar>
   <default>
    <menu n="5">

     <item n="10">
      <label>Pushback</label>
      <name>pushback</name>
      <binding>
       <command>dialog-show</command>
       <dialog-name>pushback</dialog-name>
      </binding>
     </item>

    </menu>

    <menu n="10">
     <label>Boeing 747-400</label>
     <enabled type="bool">true</enabled>

     <item>
      <label>Autostart</label>
      <binding>
       <command>nasal</command>
       <script>Boeing747.autostart()</script>
      </binding>
     </item>

     <item>
      <label>Doors</label>
      <binding>
       <command>nasal</command>
       <script>
	  var mal = gui.Dialog.new("/sim/gui/dialogs/Boeing747/menu/dialog", 
                                                              "Aircraft/747-400/Dialogs/doors-dialog.xml");
        mal.open();
       </script>
      </binding>
     </item>

     <item>
      <label>Malfunctions</label>
      <binding>
       <command>nasal</command>
       <script>
	  var mal = gui.Dialog.new("/sim/gui/dialogs/Boeing747/menu/dialog", 
                                                              "Aircraft/747-400/Dialogs/malfunctions-dialog.xml");
        mal.open();
       </script>
      </binding>
     </item>

     <item>
      <label>Yoke chart</label>
      <binding>
       <command>nasal</command>
       <script>
	  var mal = gui.Dialog.new("/sim/gui/dialogs/Boeing747/menu/dialog", 
                                                              "Aircraft/747-400/Dialogs/yokechart-dialog.xml");
        mal.open();
       </script>
      </binding>
     </item>

     <item>
      <label>Repair</label>
      <binding>
       <command>property-assign</command>
       <property>/controls/failures/gear/broken</property>
       <value>0</value>
      </binding>
      <binding>
       <command>property-assign</command>
       <property>/controls/failures/wings/broken</property>
       <value>0</value>
      </binding>
     </item>

     <item>
      <label>Select Livery</label>
      <binding>
       <command>nasal</command>
       <script>aircraft.livery.dialog.open()</script>
      </binding>
     </item>

    </menu>
   </default>
  </menubar>

 </sim>

 <consumables>
  <fuel>
   <tank n="0"><name>Center</name></tank>
   <tank n="1"><name>Res #2</name></tank>
   <tank n="2"><name>Main #1</name></tank>
   <tank n="3"><name>Main #2</name></tank>
   <tank n="4"><name>Main #3</name></tank>
   <tank n="5"><name>Main #4</name></tank>
   <tank n="6"><name>Res #3</name></tank>
   <tank n="7"><name>Stab</name></tank>
  </fuel>
 </consumables>

 <engines>
  <engine n="0">
   <running>false</running>
   <reverser-position type="double">0.000000</reverser-position>
  </engine>
  <engine n="1">
   <running>false</running>
   <reverser-position type="double">0.000000</reverser-position>
  </engine>
  <engine n="2">
   <running>false</running>
   <reverser-position type="double">0.000000</reverser-position>
  </engine>
  <engine n="3">
   <running>false</running>
   <reverser-position type="double">0.000000</reverser-position>
  </engine>   
  <engine n="4">
   <running>false</running>
   <reverser-position type="double">0.000000</reverser-position>
  </engine> 
 </engines>

 <controls>

  <electric>
   <wipers>
    <switch type = "bool">0</switch>
    <position-norm type = "double">0</position-norm>
   </wipers>
  </electric>
 
  <engines>
   <autostart>1</autostart>
  </engines>

  <failures>
   <gear>
    <broken>0</broken>
   </gear>
   <wings>
    <broken>0</broken>
   </wings>
  </failures>

  <flight>
   <autospeedbrakes-armed type="string">true</autospeedbrakes-armed>
  </flight>

  <fuel>
   <tank n="2">
    <x-feed>0</x-feed>
   </tank>
   <tank n="3">
    <x-feed>0</x-feed>
   </tank>
   <tank n="4">
    <x-feed>0</x-feed>
   </tank>
   <tank n="5">
    <x-feed>0</x-feed>
   </tank>
  </fuel>

  <gear>
   <brake-parking>1</brake-parking>
  </gear>

  <lighting>
   <beacon>0</beacon>
   <landing-light-inbdl>0</landing-light-inbdl>
   <landing-light-inbdr>0</landing-light-inbdr>
   <landing-light-outbdl>0</landing-light-outbdl>
   <landing-light-outbdr>0</landing-light-outbdr>
   <logo-lights>0</logo-lights>
   <nav-lights>0</nav-lights>
   <panel-norm>0</panel-norm>
   <strobe>0</strobe>
   <taxi-lights>0</taxi-lights>
   <turnoff-light-l>0</turnoff-light-l>
   <turnoff-light-r>0</turnoff-light-r>
  </lighting>

 </controls>

 <!-- KEYS -->

 <input>
  <keyboard>
   <key n="119">
    <name>w</name>
    <desc>Walk forward toward view</desc>
    <repeatable>true</repeatable>
    <binding>
     <command>nasal</command>
     <script>walk.walk_about(0.1)</script>
    </binding>
   </key>
   <key n="87">
    <name>W</name>
    <desc>Walk backward from view</desc>
    <repeatable>true</repeatable>
    <binding>
     <command>nasal</command>
     <script>walk.walk_about(-0.1)</script>
    </binding>
   </key>
   <key n="127">
    <name>Delete</name>
    <desc>Toggle Reversers</desc>
    <binding>
     <command>nasal</command>
     <script>reversethrust.togglereverser()</script>
    </binding>
   </key>
  </keyboard>
 </input>

 <autopilot>
   <autobrake>
   <config>
    <num-steps type="int">5</num-steps>
    <rto-step type="int">-2</rto-step>
    <rto-engage-kts type="double">85</rto-engage-kts>
    <rto-decel-fts-sec type="double">11</rto-decel-fts-sec>
    <max-decel-fts-sec type="double">11</max-decel-fts-sec>
   </config>
  </autobrake> 
  <config>
   <min-climb-speed-kt type="float">150.0</min-climb-speed-kt>
   <best-climb-speed-kt type="float">200.0</best-climb-speed-kt>
   <target-climb-rate-fpm type="float">2000.0</target-climb-rate-fpm>
   <target-descent-rate-fpm type="float">1500.0</target-descent-rate-fpm>
   <elevator-adj-factor type="float">1500.0</elevator-adj-factor>
   <integral-contribution type="float">0.005</integral-contribution>
   <zero-pitch-throttle type="float">0.0001</zero-pitch-throttle>
   <zero-pitch-trim-full-throttle type="float">0.0001</zero-pitch-trim-full-throttle>
   <max-roll-deg type="float">30</max-roll-deg>
   <max-aileron type="float">0.5</max-aileron>
   <indicated-heading-magnetic type="bool">true</indicated-heading-magnetic>
  </config>
  <!-- settings when power first applied -->
  <settings>
   <target-altitude-ft>10000</target-altitude-ft>
   <target-speed-kt>200</target-speed-kt>
   <true-heading-deg>000</true-heading-deg>
  </settings>
 </autopilot>

 <!-- INSTRUMENTATION -->

 <instrumentation>
  <efis>
   <mfd>
    <display-mode>APP</display-mode>
   </mfd>
  </efis>
  <groundradar>
   <range>2</range>
  </groundradar>
  <mk-viii>
   <serviceable>1</serviceable>
   <speaker>
    <max-dist>2</max-dist>
    <reference-dist>1</reference-dist>
    <volume>0.4</volume>
   </speaker>
  </mk-viii>
  <radar>
   <switch type="string" archive="y">on</switch>
   <mode-control type="int" archive="y">1</mode-control>
   <display-mode>plan</display-mode>
   <display-controls>
	<WX type="bool" archive="y">false</WX>
	<pos type="bool" archive="y">true</pos>
	<data type="bool" archive="y">true</data>
	<symbol type="bool" archive="y">true</symbol>
	<rotate type="bool" archive="y">true</rotate>
   </display-controls>
   <serviceable type="bool">true</serviceable>
   <range type="int" archive="y">10</range>
   <reference-range-nm type="double" archive="y">640</reference-range-nm>
   <mode type="string" archive="y">WX</mode>
   <font>
	<color>
	 <red type="float">0.7</red>
	 <green type="float">0.7</green>
	 <blue type="float">0.7</blue>
	 <alpha type="float">1</alpha>
	</color>
	<name type="string" archive="y">helvetica_bold.txf</name>
	<size type="float">8</size>
	<line-spacing type="float">0.2</line-spacing>
   </font>
   <lightning type="bool" archive="y">true</lightning>
   <display-mode type="string" archive="y">arc</display-mode>
   <radar-texture-path type="string" archive="y">Aircraft/747-400/Panels/Instruments/MFD/od_wxradar.png</radar-texture-path>
   <echo-texture-path type="string" archive="y">Aircraft/747-400/Panels/Instruments/MFD/wxecho.png</echo-texture-path>
   <minimized type="bool" archive="y">false</minimized>
   <heading-marker type="bool" archive="y">true</heading-marker>
   <limit-deg type="int">360</limit-deg>
  </radar>
 </instrumentation>

 <limits>
  <max-flap-extension-speed>
   <flaps>0.033</flaps>
   <speed>285</speed>
  </max-flap-extension-speed>
  <max-flap-extension-speed>
   <flaps>0.167</flaps>
   <speed>260</speed>
  </max-flap-extension-speed>
  <max-flap-extension-speed>
   <flaps>0.333</flaps>
   <speed>240</speed>
  </max-flap-extension-speed>
  <max-flap-extension-speed>
   <flaps>0.667</flaps>
   <speed>230</speed>
  </max-flap-extension-speed>
  <max-flap-extension-speed>
   <flaps>0.833</flaps>
   <speed>205</speed>
  </max-flap-extension-speed>
  <max-flap-extension-speed>
   <flaps>1.000</flaps>
   <speed>180</speed>
  </max-flap-extension-speed>
  <max-gear-extension-speed>270</max-gear-extension-speed>
  <vne>600</vne>
  <max-positive-g>2.5</max-positive-g> 
 </limits>

 <systems>
  <electrical>
   <outputs>
    <efis>20</efis>
   </outputs>
  </electrical>
 </systems>

 <!-- NASAL -->

 <nasal>
  <Boeing747>
   <file>Aircraft/747-400/Nasal/doors.nas</file>
   <file>Aircraft/747-400/Nasal/Electrical.nas</file>
   <file>Aircraft/747-400/Nasal/ins.nas</file>
   <file>Aircraft/747-400/Nasal/liveries.nas</file>
   <file>Aircraft/747-400/Nasal/system.nas</file>
   <file>Aircraft/747-400/Nasal/wipers.nas</file>
   <file>Aircraft/Generic/limits.nas</file>
  </Boeing747>
  <reversethrust>
   <file>Aircraft/747-400/Nasal/reverse-thrust.nas</file>
  </reversethrust>
  <walk>
   <file>Aircraft/747-400/Nasal/walk.nas</file>
  </walk>
 </nasal>

 <surface-positions include="Systems/init-surface.xml"/>

  <payload>
 Â <weight>
 Â  <name type="string">Passengers and crew</name>
 Â  <weight-lb alias="/fdm/jsbsim/inertia/pointmass-weight-lbs[0]"/>
 Â  <min-lb type="double">3000.0</min-lb>
 Â  <max-lb type="double">90000.0</max-lb>
 Â </weight>
 Â </payload>
 
</PropertyList>